# 8. 策略与注解（扩展）

本章阐述策略如何影响注解输出，并提供实现层面的说明。

## 命名策略

- `lineHumpNamingStrategy` — 下划线转驼峰。
- `noneNamingStrategy` — 保持原样。
- 挂载：`TemplateConfig` 在 `Kronos.init` 中设置 `Kronos.tableNamingStrategy` 与 `Kronos.fieldNamingStrategy`（默认下划线转驼峰）。

## 时间/删除/乐观锁/主键策略

- 在 `[strategy]` 中通过列名声明。
- `TemplateConfig` 将其保存到 Kronos 全局策略（`KronosCommonStrategy`）。
- `KronosTemplate.Field.annotations()` 将 `field.columnName` 与各策略的 `field.columnName` 对比：
  - 相等则输出对应注解（`@CreateTime`、`@UpdateTime`、`@LogicDelete`、`@Version`）。
- 主键：
  - 若 `Kronos.primaryKeyStrategy.field.columnName == columnName`，按 `PrimaryKeyType.IDENTITY` 处理；
  - 否则尊重字段元数据中的 `Field.primaryKey`。

## ColumnType 输出策略

- 当默认推断不足以表达精确信息时，输出 `@ColumnType(type = KColumnType.X, length = L, scale = S)`：
  - 排除常见字符串/布尔/数字且长度/精度无意义的情况；
  - `length/scale` 非 0 时才包含参数。
- 理念：在可读性与精确性之间取得平衡，仅在必要时保留细节。

## 索引注解

- `List<KTableIndex>.toAnnotations()`：非空则拼接多行 `@TableIndex(...)`，为空返回 null。
- 仅在存在参数时输出：name、columns、type、method、concurrently。
- 仅当列表非空时添加 `TableIndex` import。