# 1. 模块定位与简介

kronos-compiler-plugin 是 Kronos-ORM 的 Kotlin 编译器插件，面向 K2 前端。其目标是在“编译期”理解并增强 Kronos 的 DSL：
- 识别并追踪所有实现 KPojo 接口的类型（实体/投影等）；
- 将 KTableForSelect/Set/Condition/Sort/Reference 等 DSL 写法转换为更显式的 IR 调用（如 addFieldList、条件拼接等），从而在运行期获得更稳定、更高性能的执行结构；
- 对 TypedQuery 与 SelectFrom 系列 API 的类型参数进行修正/补全，减少因类型擦除或推断不足导致的问题；
- 提供 @KronosInit 的延迟初始化机制：用户可在任意位置声明初始化函数（标记注解），插件在编译结束时统一回放并生成 KClass 映射代码。

与代码生成（kronos-codegen）的区别：
- codegen：根据数据库元数据“生成”源码文件；
- compiler-plugin：对用户自身的 Kotlin 源码在“编译期”做 IR 级别的语义增强与重写。

适用场景：
- 需要更强的静态保障与更清晰的中间表示；
- 希望降低运行期反射/解析开销；
- 希望为团队统一的 DSL 写法提供编译期规则。
